# peakscount
Вычисление числа таймаутов маркированных запросов одного типа по логу phantom или JMeter.


Может использоваться cледующим образом (граничные значения для вычисления таймаутов задаются в отдельном файле с JSON):

```bash
$ ./peakscount.py -t phantom -f phout_example.log -c cfg_example.json -v 0.0.1
logtype: phantom
ver: 0.0.1
fname: ~/peakscount/phout_example.log
cfg: ~/peakscount/cfg_example.json
Thresholds: {u'service-name.6.node-name': 1.0, u'service-name.1.node-name': 1.5, u'service-name.8.node-name': 1.0, u'service-name.3.node-name': 1.5, u'service-name.2.node-name': 1.0, u'service-name.5.node-name': 1.0, u'service-name.4.node-name': 0.5}
**************************************************
Raw Report:
Всего запросов: 10000, всего таймаутов: 78. Процент таймаутов: 0.780000%
--------------------------------------------------------------------------------------------
|       Тип запроса        | Количество таймаутов | Процент от числа запросов данного типа |
--------------------------------------------------------------------------------------------
| service-name.1.node-name |          4           |             0.391389432485             |
--------------------------------------------------------------------------------------------
| service-name.2.node-name |          14          |             0.73145245559              |
--------------------------------------------------------------------------------------------
| service-name.3.node-name |          30          |             1.46914789422              |
--------------------------------------------------------------------------------------------
| service-name.4.node-name |          7           |             0.679611650485             |
--------------------------------------------------------------------------------------------
| service-name.5.node-name |          16          |             0.785083415113             |
--------------------------------------------------------------------------------------------
| service-name.6.node-name |          5           |             0.503524672709             |
--------------------------------------------------------------------------------------------
| service-name.8.node-name |          2           |             0.208116545265             |
--------------------------------------------------------------------------------------------

**************************************************
Jira Report:
||Версия||Всего запросов||Всего таймаутов||Процент от общего числа запросов||
|0.0.1|10000|78|0.780000%|
||Тип запроса||Таймаут||Количество запросов||Количество таймаутов||Процент от числа запросов данного типа||
|service-name.1.node-name|1.5|1022|4|0.391389%|
|service-name.2.node-name|1.0|1914|14|0.731452%|
|service-name.3.node-name|1.5|2042|30|1.469148%|
|service-name.4.node-name|0.5|1030|7|0.679612%|
|service-name.5.node-name|1.0|2038|16|0.785083%|
|service-name.6.node-name|1.0|993|5|0.503525%|
|service-name.8.node-name|1.0|961|2|0.208117%|

```

